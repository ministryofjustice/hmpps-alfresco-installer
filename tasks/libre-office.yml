---

- name: Set libreoffice facts
  set_fact:
    libre_office_version: "{{ libre_office_version|default('5.2.1.2') }}"
    libre_office_url:  "https://downloadarchive.documentfoundation.org/libreoffice/old/{{ libre_office_version|default('5.2.1.2') }}/rpm/x86_64/LibreOffice_{{ libre_office_version|default('5.2.1.2') }}_Linux_x86-64_rpm.tar.gz"

- name: Download libreoffice
  command: "wget {{ libre_office_url}} -O /tmp/lo_{{ libre_office_version }}.tar.gz"

- name: Uncompress our installer
  unarchive:
    src: "/tmp/lo_{{ libre_office_version }}.tar.gz"
    remote_src: true
    dest: "/tmp/"

- name: Install libreoffice
  command: "yum localinstall -y /tmp/LibreOffice_{{ libre_office_version }}_Linux_x86-64_rpm/RPMS/*.rpm"

- name: Cleanup
  file:
    state: absent
    path: "/tmp/{{ item }}"
  with_items:
    - "lo_{{ libre_office_version }}.tar.gz"
    - "LibreOffice_{{ libre_office_version }}_Linux_x86-64_rpm"
